<?xml version="1.0" encoding="UTF-8"?>
<CabsfMessageExchange
	xmlns="http://www.opensimulationsystems.org/cabsf/schemas/CabsfMessageExchange/0.2"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

	<!-- MessageIdentifiers section not currently used, to be refactored -->
	<MessageIdentifiers>
		<Simulation>
			<!-- Required by CABSF, but optional in the configuration -->
			<SimulationId />
			<!-- Optional -->
			<SimulationVersionId />
			<!-- Optional -->
			<SimulationSpecificationConfigurationId>
			</SimulationSpecificationConfigurationId>
		</Simulation>
		<CommonAgentBasedSimulationFramework>
			<!-- Required by CABSF, but optional in the configuration -->
			<SimulationRunGroupId />
			<!--THIS ELEMENT IS ALWAYS GLOBALLY UNIQUE (GENERATED BY CABSF), FOR A
				SIMULATION RUN GROUP. THIS PLUS THE SIMULATION RUN Id IS GUARANTEED TO
				BE
				GLOBALLY UNIQUE FOR A ANY GIVEN SIMULATION RUN INSTANCE -->
			<SimulationRunGroupInstanceId>
			</SimulationRunGroupInstanceId>
			<!-- Required by CABSF, but optional in the configuration -->
			<SimulationRunId />
			<!-- Optional -->
			<UserDefinedConfigurations />
		</CommonAgentBasedSimulationFramework>
	</MessageIdentifiers>

	<Status />

	<!-- All agent models are uniquely identified by 3-Part Id: Distributed
		System Id, Software Agent Id, and agent model id in both the simulation
		runtime and the distributed system(s)/MASs. -->

	<MessageSender>
		<!-- Either -->
		<SimulationSystem>
			<Name></Name>
			<ID></ID>
			<AgentModel distributedsystemid="" softwareagentid=""
				agentmodelid=""></AgentModel>
		</SimulationSystem>
		<!-- OR... -->
		<DistributedSystem>
			<Name></Name>
			<AgentModel distributedsystemid="" softwareagentid=""
				agentmodelid="">
			</AgentModel>
		</DistributedSystem>
	</MessageSender>

	<!-- Messages from simulation runtime/simulation agents to distributed system
		software agents/agent models, or vice versa -->
	<BidirectionalMessages>
		<!-- Depending on the message flow direction (as specified above), the
			messages below are EITHER directed to the specified distributed system/software
			agent/agent
			model, or to the corresponding agent in the simulation runtime. -->
		<DistributedSystems>
			<DistributedSystem>
				<Name />
				<ID />

				<ControlMessages>
					<!-- START_SIMULATION or END_SIMULATION -->
					<Command></Command>
				</ControlMessages>

				<!-- In the distributed system, the autonomous software agents (usually
					separate threads or processes) each
					execute 1 to many (usually just 1) agent models for the simulation. -->
				<SoftwareAgents>
					<SoftwareAgent>
						<Name />
						<ID />

						<ControlMessages>
							<Command></Command>
						</ControlMessages>

						<!-- At the ABM model level, the agents in the simulation. In the ABM
							simulation
							toolkits, these are natively just called "agents" -->
						<AgentModels>
							<AgentModel>
								<Name />
								<ID />

								<EnvironmentChanges>
									<!-- Entries that are commonly used in simulations -->
									<CommonEnvironmentChanges>
										<EnvironmentChange>
											<AgentModelLocationChanges>
												<AgentModelLocationChange
													distributedsystemid="" softwareagentid="" agentmodelid="">
													<!-- Either -->
													<GridCellX />
													<GridCellY />
													<GridCellZ />
													<!-- other dimensions as necessary -->
													<!-- Or -->
													<GridPointX />
													<GridPointY />
													<GridPointZ />
													<!-- other dimensions as necessary -->
												</AgentModelLocationChange>
											</AgentModelLocationChanges>
										</EnvironmentChange>
									</CommonEnvironmentChanges>
									<SimulationSpecificEnvironmentChanges>
										<EnvironmentChange>
											<!-- Values are simulation-specific. Usually key/value pairs
												are used -->
										</EnvironmentChange>
									</SimulationSpecificEnvironmentChanges>
								</EnvironmentChanges>

								<!-- These are changes in internal agent model state that are not
									necessarily observable by other nearby
									agent models. Useful for studying agent behavior manifestation
									from internal agent beliefs/desires/intentions. -->
								<InternalStateChanges>
									<CommonInternalStateChanges>
										<InternalStateChange distributedsystemid=""
											softwareagentid="" agentmodelid="">
											<!-- Values are simulation-specific. Usually key/value pairs
												are used -->
										</InternalStateChange>
										<InternalStateUpdate />
									</CommonInternalStateChanges>
									<SimulationSpecificInternalStateChanges>
										<InternalStateChange>
											D
										</InternalStateChange>
									</SimulationSpecificInternalStateChanges>
								</InternalStateChanges>

								<!-- Messaging such as bargaining between agent models. -->
								<InterAgentMessageExchange>
									<CommonInterAgentModelMessages>
										<Message>
											<From distributedsystemid="" softwareagentid=""
												agentmodelid=""></From>
											<To distributedsystemid="" softwareagentid=""
												agentmodelid=""></To>
											<MessageContent></MessageContent>
										</Message>
									</CommonInterAgentModelMessages>
									<SimulationSpecificInterAgentModelMessages>
										<Message>
											<From distributedsystemid="" softwareagentid=""
												agentmodelid=""></From>
											<To distributedsystemid="" softwareagentid=""
												agentmodelid=""></To>
											<!-- Values are simulation-specific. Usually key/value pairs
												are used -->
											<MessageContent></MessageContent>
										</Message>
									</SimulationSpecificInterAgentModelMessages>
								</InterAgentMessageExchange>
							</AgentModel>

							<!-- Not Currently Supported -->
							<!-- To all agent models under the containing software agent, or corresponding
								agent models in the simulation runtime (depending on the direction
								of the message. -->
							<ToAllAgentModels> <!-- under the software agent id above -->
								<!-- To all Agent Models in this Distributed System -->
								<ControlMessages>
									<!-- START_SIMULATION or END_SIMULATION -->
									<Command></Command>
								</ControlMessages>
							</ToAllAgentModels>

						</AgentModels>
					</SoftwareAgent>

					<!-- Not Currently Supported -->
					<!-- To all software agents under the containing distributed system,
						or corresponding
						agent models in the simulation runtime (depending on the direction
						of the message. -->
					<ToAllSoftwareAgents>
						<ControlMessages>
							<!-- START_SIMULATION or END_SIMULATION -->
							<Command></Command>
						</ControlMessages>
					</ToAllSoftwareAgents>

				</SoftwareAgents>
			</DistributedSystem>
		</DistributedSystems>
	</BidirectionalMessages>
</CabsfMessageExchange>