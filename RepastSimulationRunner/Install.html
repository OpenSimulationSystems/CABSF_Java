<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>The Common Simulation Framework Installation Instructions</title></head>
<body>
<h1><span style="font-weight: bold;">The Common
Simulation Framework Installation Instructions</span></h1>
Author: <a href="mailto:jcald1@gmail.com">Jorge Calderon</a><br>
Release 0.1.TBD<br>
11/19/2014<br>
<h2>Requirements</h2>
<ol>
<li>JDK 1.7 recommended (TBD: determine minimum version
supported)</li><li>Windows, MacOSX, or *nix (The instructions assume Windows for now)</li></ol>
<h2>Third Party Software Downloads<br></h2>Download and install the following software<ol><li><a href="http://repast.sourceforge.net/download.html">Repast
Simphony (Java version)</a></li><li>(Future, not needed with present version):<a href="http://jade.tilab.com/download/jade/"> JADE</a></li><li><a href="http://redis.io/download">Redis</a></li><li><a href="http://www.git-scm.com/downloads">git</a>
to pull the code</li></ol>Add redis-server, redis-cli, and git to your environment path variable.<br><br>It
is possible run the Common Simulation Framework without the full Repast
Simphony IDE, either using the command line or with a general Eclipse
distribution. However, the instructions here assume that the Repast
Simphony customization of the eclipse IDE will be used to run the
Common Simulation framework, the distributed systems (Multi-agent
systems) and distributed agent models.<br>
<h2>Installation Instructions</h2>
<ol>
<li>Download and install Repast Simphony (Java Version), Redis,
and
git.<br>
</li>
<li>Download the Common Simulation Framework Code (To be moved
to GitHub)</li>
<ol>
<li>Log on to code.seas.harvard.edu with your Harvard id.</li>
<li>Clone this repository:
git@code.seas.harvard.edu:jcalderon-thesis/jcalderon-thesis.git</li>
<li>Go to the project page: <a href="https://code.seas.harvard.edu/jcalderon-thesis/jcalderon-thesis">https://code.seas.harvard.edu/jcalderon-thesis/jcalderon-thesis</a></li>
<li>Copy the git URL and clone it on your local machine using
this command: git clone
git@code.seas.harvard.edu:jcalderon-thesis/jcalderon-thesis.git</li>
</ol>
<li>Install <span style="font-weight: bold;">JZombies_CSF_Demo</span></li>
<ol>
<li>While this simulation comes with the Repast samples
(File-Import-Repast Simphony-Import Repast Example Models), the CSF
version is needed as it includes code to connect to the CSF.
&nbsp;The name of the project/directory is JZombies_CSF_Demo.</li>
<ol>
<li>Temporarily rename the JZombies_CSF_Demo directory.</li><li>File-Import-New-Repast Simphony-Select your workspace folder-Add the JZombies_CSF_Demo<span style="font-weight: bold;"> </span>folder to the path and make it the project name-Next-Finish</li>
<li>Copy the contents of your renamed  JZombies_CSF_Demo directory into the new directory</li><li>Delete the jZombies_CSF_Demo package directory, leaving only the "jzombies" package.</li><li>Right click on the project on the left side (package explorer) and click Refresh.</li><li>Click the down arrow next to the green "Run" button.
&nbsp;Verify that Repast Simphony/Eclipse has created a run
configuration for&nbsp; <span style="font-weight: bold;">JZombies_CSF_Demo
</span>simulation.</li>
<li>Right click on the project name on the left side,
Repast Simphony, Add Repast Simphony Nature.</li>
<li>Click the simulation in the drop down list
for JZombies_CSF_Demo.</li>
<li>If you see an error when using Windows, such as
"WARNING: Could not
open/create prefs root node Software\JavaSoft\Prefs at root 0x80000002.
Windows RegCreateKeyEx(...) returned error code 5." in the eclipse
console window, you can implement the fix described <a href="http://stackoverflow.com/questions/16428098/groovy-shell-warning-could-not-open-create-prefs-root-node">here</a>,
but is not necessary.&nbsp;</li>
<li>The Repast GUI should pop up after a few seconds.</li>
<li>Run the simulation by clicking on the blue run button.
&nbsp;You should see the image on the right of zombies catching
humans. &nbsp;The ticks should increment by 1s. &nbsp;You should be able to step one tick at a time.</li>
<li>The
Repast "<a href="http://repast.sourceforge.net/docs.php">Getting
Started guide</a>" is a great place to start for learning Repast.
&nbsp;Even if you don't plan to create your own simulations, browse
through the instructions so you learn&nbsp; the directory
structure, parameters, and how to use the GUI.</li>
</ol>
</ol>
<li>Open Repast Simphony (Eclipse) and create a separate new
Java
Project for these projects under the cloned local repo (File-New-Java
Project), unselect "Use default location", browse to each directory in
the list below.&nbsp;</li>
<ol>
<li>RepastSimulationRunner</li>
<ol>
<li>Create a new Java Project for RepastSimulationRunner.</li>
</ol>
<li>CSF_JADE_Controller_Agent</li>
<span style="text-decoration: underline;">NOTE</span>:
&nbsp;The CSF_JADE_Controller_Agent will become a become a
JADE agent in the future. For now, it is a standalone Java program that
holds mock Human agents for the simulation.
<br>
</ol>
<li>Right click on the RepastSimulationRunner project-Build
Path-Projects, and select the&nbsp;JZombies_CSF_Demo project.</li><li>Click
on the libraries tab, select add JARs, and select all of the JARs in
the&nbsp;RepastSimulationRunner/lib folder and its subfolders.</li><li>Click on the libraries tab, Add External JARs, and select
the "repast.simphony.bin_and_src.jar", which is in your <span style="font-weight: bold;">{Repast_Installation}/eclipse/plugins/repast.simphony.bin_and_src_2.1.0
</span>directory.</li><li>Add all of the External JARS in the following
directory:&nbsp;<span style="font-weight: bold;">{Repast_Installation}/eclipse/plugins/repast.simphony.runtime_2.1.0/lib</span></li><li>Add<span style="font-weight: bold;"> {Repast_Installation}/eclipse/plugins/repast.simphony.core_2.1.0/lib/colt-1.2.0-no_hep.jar</span></li><li>Click "OK".</li><li>Click "Add JARs", select all of the JARs in the RepastSimulationRunner/lib directory.&nbsp;</li><li>Right click on the JZombies_CSF_Demo project and add the RepastSimmulationRunner project.</li><li>The
stop above created a circular dependency. &nbsp;To be able to compile,
go to Windows -&gt; Prefereneces -&gt; Java-&gt; Compiler -&gt;
Buliding -&gt; Circular Depencies and set it to Warning.</li><li>Right
click on&nbsp;CSF_JADE_Controller_Agent, click on project-Build
Path-Libraries. &nbsp;Select add External JARs, and select all of the
JARs in the&nbsp;RepastSimulationRunner/lib folder and its subfolders.</li><li>Open
the launchers folder, right click on RepastSimulationRunner -
CSF.launch, right click, open with Editor. &nbsp;Change the path to the simulation in simulation to your JZombies_Demo path.</li><li>Right click on the launcher file again,&nbsp;"Run As", click "RepastSimulationRunner -
CSF.launch"
. &nbsp;The simulation runner is executing now. &nbsp;Next time you should see it in the drop down next to the run
button.</li><li>You should see an error message initially as Redis has not been
started. &nbsp;The configuration in eclilpse is now complete.</li><li>Click on that drop down next to the green run, Run Configurations, select the "RepastSimulationRunner -
CSF.launch button", select the Arguments tab. &nbsp;You should see the path to your JZombies_Demo diurectory.</li><li>The
project will show some errors &nbsp;in the Junit tests (Java unit
tests) due to missing Eclipse plugins/software. &nbsp;It is recommended
that the following software be added to Eclipse to get rid of these
errors and to make it easier to find your own errors:
&nbsp;Help-Install New Software. &nbsp;In the "Work with" drop down,
select Kepler (this is the verion of Eclipse), Select "Web, XML, Java
EE, and OSGI Enterprise Development" and restart. &nbsp;Alternatively,
you can look
for just the individual missing components. &nbsp;In order to get
passed the Junit errors, right click on the "test" folder, right click
New-Create a new JUnit test, give it a name, Next, select "Add Junit to
the build path". &nbsp;The errors on the Junit tests should go away.</li><li></li><li>You are ready to start the simulation now.</li>
<ol>
</ol>
</ol>
<h2>Simulation Execution</h2>
<ol><li><span style="font-weight: bold;">Start up all of the Processes</span></li><ol><li>Start
the Redis server by opening the launcher folder, selecting the
appropriate subfolder for your operating system, and double clicking on
"redis-server". &nbsp; If it opens as a text file, right click it, open
with, default editor. &nbsp; (TODO: Create another version for
Linux/MacOS for each of these files).&nbsp;Keep a separate
terminal window open for Redis and watch for error messages.
&nbsp;Alternatively, in Windows, Redis can be installed as a service. </li><li>Optionally,
run a separate terminal window for the redis command line "redis-cli".
&nbsp;This allows you to inspect messages. &nbsp;For example, if you
shut down or pause the distributed system(s), you can checkto see what
message the simulation engine (Repast) is trying to send those systems.
</li><ol><li>Useful
commands include "KEYS *" to see all messages, "lpop thechannelname" to
pop a value from the list. &nbsp;Note, that these messaging structures
may be changed in the future to apublish/subscribe model, which would require a different command to read the messages. </li></ol><li>Navigate
to the launchers folder and right click on "RepastSimulationRunner -
CSF.launch". &nbsp; You should see that the
RepastSimulationRunner, running the Simulation side of the CSF begins
to execute. &nbsp;After right clicking this .launch file, you should
now see this entry as a run configuration in the drop down next to the
green run button at the top. &nbsp;In the future, you can execute this
run from there. &nbsp;If any changes are needed such as a changed
program argument (such as a new location of the CSF configuration
file), changes directly to the run configuration will not change the
.launch file. It would be best to change the .launch file, delete the
run configuration, and right click again.</li><li>Click
on the drop down next to the run button and select
RepastSimulationRunner - CSF. &nbsp;You should see in the console that
the Common Simulation Framework is polling the
Redis
in-memory cache for commands from you, the simulation administrator.</li><li>Start up the distributed system(s)</li></ol>
<li style="font-weight: bold;">Kick off the Simulation Run(s)</li><ol><li>All
of the processes are running now. &nbsp;The distributed system(s) are
waiting on the simulation engine and as mentioned already, the
simulation engine is waiting on you, the simulation administrator.</li><li>Start
the simulation run(s) by&nbsp;passing a START_SIMULATION command to the
simulation engine. &nbsp;Double click on"sendStartSimulationCommandFromAdmin.bat"t to do
so.</li><li>If you terminate the simulation early, make sure to flush the Redis cache by clicking on flushRedisCache.bat. &nbsp;</li></ol>
</ol>
</body></html>